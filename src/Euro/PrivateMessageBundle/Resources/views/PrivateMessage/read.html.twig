{% extends '::base.html.twig' %}

{% block title %}{{ messages[messages|length - 1].title }}{% endblock %}

{% block body %}
<div class="page-header">
	<h1>
		{{ block('title') }}
		<small><a data-toggle="collapse" data-target="#answer_form">{{ 'pm.answer'|trans }}</a></smal>
	</h1>
</div>

<div class="collapse" id="answer_form">
	{% include "EuroPrivateMessageBundle:PrivateMessage:form.html.twig" with {
		mode: 'answer',
		path: path('pm_read', { id: messages[0].conversation })
	} %}
</div>

{% for message in messages %}
	<div class="well">
		<div class="row-fluid">
			<div class="span2">
				<strong><a href="{{ path('user_view', { id: message.fromuser.id }) }}">{{ message.fromuser.username }}</a></strong>,<br />
				{{ 'pm.on'|trans }} {{ message.postdate|date }}
			</div>

			<div class="span10">
				{% if message.title %}<h3>{{ message.title }}</h3>{% endif %}

				{{ message.text }}
			</div>
		</div>
	</div>
{% endfor %}

<script src="{{ asset('bundles/europrivatemessage/js/pm.js') }}" type="text/javascript"></script>
{% endblock %}
