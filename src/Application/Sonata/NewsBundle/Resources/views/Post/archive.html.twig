{% extends '::base.html.twig' %}

{% block title %}{{ 'news.archives'|trans }}{% endblock %}

{% block body %}
<h2 class="page-header">{{ block('title') }}</h2>

<div class="row-fluid">
	{% for post in pager.getResults() %}
			{% if loop.index0 > 0 and loop.index0 % 3 == 0 %}
				</div>
				<div class="row-fluid">
			{% endif %}

		<div class="span4">
			<h3><a href="{{ url('sonata_news_view', { permalink: sonata_news_permalink(post) }) }}">{{ post.title }}</a></h3>

			<p>{{ post.abstract|format_text('markdown')|raw }}</p>
			<p>
				<strong>{{ 'news.tags'|trans }} :</strong>
				{% for tag in post.tags%}
					<a href="{{ url('sonata_news_tag', { tag: tag.slug }) }}">{{ tag.name }}</a>
					{% if not loop.last %}, {% endif %}
				{% endfor %}
			</p>
			<p>
				<span class="muted">{{ 'news.posted_by_on'|trans({ '%author%': post.author, '%date%': post.publicationDateStart|format_datetime }) }}</span>
			</p>
		</div>
	{% else %}
		<div class="alert">{{ 'news.none'|trans }}</div>
	{% endfor %}
</div>
{% endblock %}
